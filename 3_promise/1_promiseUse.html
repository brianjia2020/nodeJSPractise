<body>
    <div class="container">
        <h2 class="page-header">Promise Initial Demo</h2>
        <button class="btn btn-primary" id="btn">click</button>
    </div>
    <script type="application/javascript">
        //random generator
        function rand(m,n){
            return Math.ceil(Math.random()*(n-m+1)) + m-1;
        }
        //
        const btn=document.querySelector('#btn');
        btn.addEventListener('click', () => {
            // setTimeout(()=>{
            //     //30% 1-100 to choose
            //     let n = rand(1,100)
            //     if (n<=30){
            //         alert("Congratulations!!!!")
            //     } else {
            //         alert("Maybe try next time.")
            //     }
            // },1000)

            //now we use promise
            //resolve: when asynchronous functions has been successfully 
            //reject: when it got failed
            const p = new Promise((resolve, reject) => {
                setTimeout(()=>{
                    //30% 1-100 to choose
                    let n = rand(1,100)
                    if (n<=30){
                        resolve(n) //set the promise state to success
                    } else {
                        reject(n) //set the promise state to fail
                    }
                },1000)
            });

            //invoke then method
            //      - the first argument is 
            p.then((vlaue) => {
                alert("Congratulations!!!!! Your number is " + value)
            }, (reason) => {
                alert("Maybe try next time. Your number is " + reason)
            })
        });
    </script>
</body>